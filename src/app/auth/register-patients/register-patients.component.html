<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="/registerPatients.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Registro de Paciente</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="main-content" *ngIf ="!updating">
                    <h1>Formulario de Registro de Paciente</h1>
                        <form action="">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="nombre">Nombres</label>
                                <input type="text" class="form-control" id="nombre" placeholder="Nombres" name ="nombres"[(ngModel)]="paciente.nombre_paciente" [formControl]="nombreCtrl">
                                <p *ngIf="nombreCtrl.errors && nombreCtrl.dirty"> <small class="text-danger" *ngIf="nombreCtrl.hasError('required')">Este campo es requerido</small>
                                    <small class="text-danger" *ngIf="nombreCtrl.hasError('pattern')">¡El nombre solo acepta letras sin espacios!<br> Evite usar números o caracteres especiales ej: (*$%, etc)</small></p>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="apellidos">Apellidos</label>
                                <input type="text" class="form-control" id="apellidos" placeholder="Apellidos" name="apellidos"[(ngModel)]= "paciente.apellido_paciente" [formControl]="apellidoCtrl">
                                <p *ngIf="apellidoCtrl.errors && apellidoCtrl.dirty"> <small class="text-danger" *ngIf="apellidoCtrl.hasError('required')">Este campo es requerido</small>
                                    <small class="text-danger" *ngIf="apellidoCtrl.hasError('pattern')">¡El apellido solo acepta letras sin espacios!<br> Evite usar números o caracteres especiales ej: (*$%, etc)</small></p>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="email">Email</label>
                                <input type="email" class="form-control" id="email" placeholder="Correo Electronico" name="email"[(ngModel)]="paciente.email_paciente" [formControl]="emailCtrl">
                                <p *ngIf="emailCtrl.errors && emailCtrl.dirty"> <small class="text-danger" *ngIf="emailCtrl.hasError('required')">Este campo es requerido</small>
                                    <small class="text-danger" *ngIf="emailCtrl.hasError('email')">No es un email válido</small></p>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="comfirmarcontraseña">Contraseña</label>
                                <input type="password" class="form-control" id="txtpassword" placeholder="Contraseña" name="contraseña" [(ngModel)] ="paciente.password_paciente" [formControl]= "passwordCtrl">
                                <small id="txtContraseña" class=" text-success" *ngIf="!passwordCtrl.hasError('required')" >- Al menos 8 caracteres de longitud
                                    <br>
                                    - Al menos 1 letra mayúscula  <br>
                                    - Al menos 1 letra minúscula  <br>
                                    - Al menos 1 número  <br>
                                    - Al menos 1 carácter especial  <br></small>
                                  <p *ngIf="passwordCtrl.errors && passwordCtrl.dirty">
                                    
                                    <small class="text-danger" *ngIf="passwordCtrl.hasError('required')">Este campo es requerido</small>
                                    <small id="txtpassword" class=" text-danger" *ngIf="passwordCtrl.hasError('pattern')">
                                      La contraseña no cumple con las especificaciones requeridas <br>
                                    </small>
                    
                                  </p>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="contraseña">Confirmar Contraseña</label>
                                <input type="password" class="form-control" id="txtconfirmarcontraseña" placeholder="Contraseña" name="confirmarpassword" [formControl]= "confirmarpasswordCtrl" [(ngModel)]="confirmarPassword">
                                    <small class="text-{{confirmarPassword === paciente.password_paciente? 'success': 'danger'}}"  >{{confirmarPassword === paciente.password_paciente? "La contraseña coincide": "La contraseña no coincide"}}</small>
                            </div>
                            
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>
                                <input type="date" class="form-control" id="fecha_nacimiento" placeholder="Fecha de Nacimiento" name="fecha_nacimiento" [(ngModel)] = "paciente.fecha_nacimiento_paciente">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="sexo">Sexo</label>
                                <select id="sexo" class="form-control" name="genero" [(ngModel)]="paciente.genero_paciente">
                                    <option selected>Seleccionar...</option>
                                    <option value=true>Masculino</option>
                                    <option value =false>Femenino</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="direccion">Dirección</label>
                                <input type="text" class="form-control" id="direccion" placeholder="Dirección" name ="dirreccion"[(ngModel)] ="paciente.direccion_paciente">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="telefono">Teléfono</label>
                                <input type="text" class="form-control" id="telefono" placeholder="Teléfono" name="telefono" [(ngModel)]="paciente.telefono_paciente" [formControl]="telefonoCtrl">
                                <p *ngIf="telefonoCtrl.errors && telefonoCtrl.dirty"> <small class="text-danger" *ngIf="telefonoCtrl.hasError('required')">Este campo es requerido</small>
                                    <small class="text-danger" *ngIf="telefonoCtrl.hasError('pattern')">¡El numero de telefono solo acepta numeros!<br> Evite usar letras o caracteres especiales ej: (*$%, etc)</small>
                                    <small class="text-danger" *ngIf="telefonoCtrl.hasError('maxlength')">Debe tener como maximo 10 dijitos</small>
                                    <small class="text-danger" *ngIf="telefonoCtrl.hasError('minlength')">Debe tener como minimo 10 dijitos</small>
                                </p>
                            </div>
                            <div class="form-group col-md-3">
                                <label for="telefono_familiar">Teléfono Familiar</label>
                                <input type="text" class="form-control" id="telefono_familiar" placeholder="Teléfono Familiar" name =" telefono_familiar"[(ngModel)] ="paciente.tlf_familiar_paciente" [formControl]="telefonoCtrl">
                                <p *ngIf="telefonoCtrl.errors && telefonoCtrl.dirty"> <small class="text-danger" *ngIf="telefonoCtrl.hasError('required')">Este campo es requerido</small>
                                    <small class="text-danger" *ngIf="telefonoCtrl.hasError('pattern')">¡El numero de telefono solo acepta numeros!<br> Evite usar letras o caracteres especiales ej: (*$%, etc)</small></p>
                                    <small class="text-danger" *ngIf="telefonoCtrl.hasError('maxlength')">Debe tener como maximo 10 dijitos</small>
                                    <small class="text-danger" *ngIf="telefonoCtrl.hasError('minlength')">Debe tener como minimo 10 dijitos</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                    <label for="inputAlergias">Alergias</label>
                                    <ng-select
                                        [items]="alergias"
                                        bindLabel="nombre_alergia"
                                        bindValue="id_alergia"
                                        [(ngModel)]="paciente.id_alergias"
                                        name="txtalegias"
                                        id="txtalergias">
                                    </ng-select>
                                    
                                </div>
                            <div class="form-group col-md-6">
                                <label for="inputDiscapacidad">Discapacidad</label>
                                <ng-select
                                  [items]="discapacidades"
                                  bindLabel="nombre_discapacidad"
                                  bindValue="id_discapacidades"
                                  [(ngModel)]="paciente.id_discapacidades"
                                  name="txtalergias"
                                  id="txtalergias">
                                </ng-select>
                               </div>
                        </div>
                       
                        <div class="form-row">
                            <div class="form-group col-md-12">
                                <input type="submit" value="Registrar" class="btn btn-primary" (click)="registerPaciente(paciente)" [disabled]="nombreCtrl.invalid">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="main-content" *ngIf ="updating">
                    <h1>Formulario de Actualizacion de Paciente</h1>
                        <form action="">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="nombre">Nombres</label>
                                <input type="text" class="form-control" id="nombre" placeholder="Nombres" name ="txtNombre" [(ngModel)]="patientModel.nombre_paciente" [formControl] = "nombreCtrl">
                                <p *ngIf="nombreCtrl.errors && nombreCtrl.dirty"> <small class="text-danger" *ngIf="nombreCtrl.hasError('required')">Este campo es requerido</small>
                                    <small class="text-danger" *ngIf="nombreCtrl.hasError('pattern')">¡El nombre solo acepta letras sin espacios!<br> Evite usar números o caracteres especiales ej: (*$%, etc)</small>
                                </p>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="apellidos">Apellidos</label>
                                <input type="text" class="form-control" id="apellidos" placeholder="Apellidos" name="apellidos"[(ngModel)]= "patientModel.apellido_paciente" [formControl]="apellidoCtrl">
                                <p *ngIf="apellidoCtrl.errors && apellidoCtrl.dirty"> <small class="text-danger" *ngIf="apellidoCtrl.hasError('required')">Este campo es requerido</small>
                                    <small class="text-danger" *ngIf="apellidoCtrl.hasError('pattern')">¡El apellido solo acepta letras sin espacios!<br> Evite usar números o caracteres especiales ej: (*$%, etc)</small></p>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="email">Email</label>
                                <input type="email" class="form-control" id="email" placeholder="Correo Electronico" name="email"[(ngModel)]="patientModel.email_paciente">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="contraseña">Contraseña</label>
                                <input type="password" class="form-control" id="contraseña" placeholder="Contraseña" name="contraseña"[(ngModel)] ="patientModel.password_paciente">
                            </div>
                            
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>
                                <input type="date" class="form-control" id="fecha_nacimiento" placeholder="Fecha de Nacimiento" name="fecha_nacimiento" [(ngModel)] = "patientModel.fecha_nacimiento_paciente">
                            </div>
                            <div class="form-group col-md-6">
                                <label for="sexo">Sexo</label>
                                <select id="sexo" class="form-control" name="genero" [(ngModel)]="patientModel.genero_paciente">
                                    <option selected>Seleccionar...</option>
                                    <option value=true>Masculino</option>
                                    <option value =false>Femenino</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="direccion">Dirección</label>
                                <input type="text" class="form-control" id="direccion" placeholder="Dirección" name ="dirreccion"[(ngModel)] ="patientModel.direccion_paciente">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="telefono">Teléfono</label>
                                <input type="text" class="form-control" id="telefono" placeholder="Teléfono" name="telefono" [(ngModel)]="patientModel.telefono_paciente">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="telefono_familiar">Teléfono Familiar</label>
                                <input type="text" class="form-control" id="telefono_familiar" placeholder="Teléfono Familiar" name =" telefono_familiar"[(ngModel)] ="patientModel.tlf_familiar_paciente">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                    <label for="inputAlergias">Alergias</label>
                                    <ng-select
                                        [items]="alergias"
                                        bindLabel="nombre_alergia"
                                        bindValue="id_alergia"
                                        [(ngModel)]="patientModel.id_alergias"
                                        name="txtalegias"
                                        id="txtalergias">
                                    </ng-select>
                                    
                                </div>
                            <div class="form-group col-md-6">
                                <label for="inputDiscapacidad">Discapacidad</label>
                                <ng-select
                                  [items]="discapacidades"
                                  bindLabel="nombre_discapacidad"
                                  bindValue="id_discapacidades"
                                  [(ngModel)]="patientModel.id_discapacidades"
                                  name="txtalergias"
                                  id="txtalergias">
                                </ng-select>
                               </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-12">
                                <input type="submit" value="Actualizar" class="btn btn-primary"(click)="updateDoctor(patientModel)">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>